"use strict";if("undefined"==typeof _||!_)throw"ERROR: OpenLayers is required for fi.fmi.metoclient.ui.animator.WmsCapabilities!";if("undefined"==typeof OpenLayers||!OpenLayers)throw"ERROR: OpenLayers is required for fi.fmi.metoclient.ui.animator.WmsCapabilities!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},fi.fmi.metoclient.ui.animator.WmsCapabilities=function(){function a(a,b,c){a&&setTimeout(function(){a(b,c)},0)}function b(b){var c,d=[];if(!b.url)throw"ERROR: Empty URL!";var e=new OpenLayers.Format.WMSCapabilities,f={SERVICE:k,VERSION:l,REQUEST:m};OpenLayers.Request.GET({url:b.url,params:b.params||f,success:function(f){var g=f.responseXML;g&&g.documentElement||(g=f.responseText),c=e.read(g),a(b.callback,c,d)},failure:function(e){var f={};if(f[n]=e.status,f[o]=e.statusText,d.push(f),"undefined"!=typeof console&&console){var g="ERROR: Response error: ";g+="Status: "+f[n],g+=", Text: "+f[o],console.error(g)}a(b.callback,c,d)}})}function c(a,b){var c;if(b&&a&&a.capability&&a.capability.layers)for(var d=a.capability.layers,e=0;e<d.length;++e){var f=d[e];if(f&&f.name===b){c=f;break}}return c}function d(a){var b;if(a){var c=a.dimensions;if(c){var d=c.time;d&&(b=d.values)}}return b}function e(a){var b,c=d(a);if(c&&c.length){if(b=c[0],1===c.length&&void 0!==b&&null!==b){b+="";var e=b.split("/");e.length&&(b=e[0])}b=new Date(b)}return b}function f(a){var b,c=d(a);if(c&&c.length){if(b=c[c.length-1],void 0!==b&&null!==b&&1===c.length){b+="";var e=b.split("/");e.length>1&&(b=e[1])}b=new Date(b)}return b}function g(a){var b=new RegExp("^.+/.+/P.+$"),c=new RegExp("^.+,.+$");if(b.exec(a)){var d=a.split("/"),e=new Date(d[0]),f=new Date(d[1]),g=d[2],h=/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/,i=g.match(h);if(null!==i){var j=_.defaults(i,[0,0,0,0]),k=j[1],l=j[2],m=j[3],n=1e3*(60*k*60+60*l+m);return timestep.restricted(e,f,n)}throw"Time steps longer than one day not supported"}return timestep.list(c.exec(a)?_.map(a.split(","),function(a){return new Date(a)}):[new Date(a)])}function h(a){var b;return a&&a.capability&&a.capability.request&&a.capability.request.getcapabilities&&a.capability.request.getcapabilities.href&&(b=a.capability.request.getcapabilities.href),b}function i(c){if(!c||!c.callback){var d="ERROR: Options object and callback function in it are mandatory!";throw"undefined"!=typeof console&&console&&console.error(d),d}try{b(c)}catch(e){var f={};f[o]=e.toString(),"undefined"!=typeof console&&console&&console.error("ERROR: Get data error: "+f[o]),a(c.callback,void 0,[f])}}function j(a,b,c){var d=_.once(b),e={nComplete:0,capabilities:[],errors:[]},f=a.length;try{_.each(a,function(a){fi.fmi.metoclient.ui.animator.WmsCapabilities.getData({url:a,callback:function(b,c){void 0!==b&&e.capabilities.push({url:a,capabilities:b}),_.each(c,function(a){e.errors.push(a)}),e.nComplete+=1,e.nComplete===f&&d(e.capabilities,e.errors)},params:c})})}catch(g){e.errors.push("ERROR: Error while starting GetCapabilities requests"),setTimeout(function(){d(e.capabilities,e.errors)},0)}e.nComplete===f&&setTimeout(function(){d(e.capabilities,e.errors)},0)}var k="WMS",l="1.3.0",m="GetCapabilities",n="errorCode",o="errorText";return{getData:i,getDataMultiple:j,getRequestUrl:h,getLayer:c,getLayerTimes:d,getBeginTime:e,getEndTime:f,parseWmsTime:g}}(),"undefined"==typeof _||!_)throw"ERROR: Lodash is required for fi.fmi.metoclient.ui.animator.Animator!";if("undefined"==typeof OpenLayers||!OpenLayers)throw"ERROR: OpenLayers is required for fi.fmi.metoclient.ui.animator.Factory!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},"undefined"==typeof fi.fmi.metoclient.ui.animator.WmsCapabilities||!fi.fmi.metoclient.ui.animator.WmsCapabilities)throw"ERROR: fi.fmi.metoclient.ui.animator.WmsCapabilities is required for fi.fmi.metoclient.ui.animator.Factory!";if(fi.fmi.metoclient.ui.animator.Factory=function(){function a(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c-=d,a.setTime(c))}}}function b(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c+=b-d,a.setTime(c))}}}var c=function(c){function d(){var a=g.getConfig();if(!f&&a&&a.map&&a.map.className){var b;if(a.map.args&&a.map.args.length>0){b=a.map.args;var c=b[0];c.theme||(c.theme=null)}f=j(a.map.className,b)}return f}function e(){var c=g.getConfig();if(c&&c.layers&&0===h.length)for(var d,e=c.layers,f=0;f<e.length;++f){var i=e[f];if(d=void 0,i&&i.className&&i.args){for(var k=0;k<i.args.length;++k){var l=i.args[k];if(l){var m=l.animation;if(m){void 0===m.resolutionTime&&(m.resolutionTime=g.getAnimationResolution()),void 0===m.beginTime&&(m.beginTime=g.getAnimationBeginDate()),void 0===m.endTime&&(m.endTime=g.getAnimationEndDate()),m.resolutionTime&&(m.beginTime instanceof Date||(m.beginTime=new Date(m.beginTime)),a(m.beginTime,m.resolutionTime),m.endTime instanceof Date||(m.endTime=new Date(m.endTime)),b(m.endTime,m.resolutionTime));break}}}d=j(i.className,i.args)}d&&h.push(d)}return h}var f,g=c,h=[],i=function(a,b){var c;if(a){var d=[a,a];b&&(d=d.concat(b)),c=_.bind.apply(_,d)}return c},j=function(a,b){var c;if(a){var d=a.split("."),e=window||this;if(e){for(var f=0,g=d.length;g>f;f++)e=e[d[f]];"function"==typeof e&&(c=new(i(e,b)))}}return c};this.getMap=d,this.getLayers=e};return c}(),"undefined"==typeof timestep||!timestep)throw"ERROR: timestep.js is required for fi.fmi.metoclient.ui.animator.Factory2!";if("undefined"==typeof _||!_)throw"ERROR: Lodash is required for fi.fmi.metoclient.ui.animator.Factory2!";if("undefined"==typeof OpenLayers||!OpenLayers)throw"ERROR: OpenLayers is required for fi.fmi.metoclient.ui.animator.Factory2!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},"undefined"==typeof fi.fmi.metoclient.ui.animator.WmsCapabilities||!fi.fmi.metoclient.ui.animator.WmsCapabilities)throw"ERROR: fi.fmi.metoclient.ui.animator.WmsCapabilities is required for fi.fmi.metoclient.ui.animator.Factory2!";if(fi.fmi.metoclient.ui.animator.Factory2=function(){function a(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c-=d,a.setTime(c))}}}function b(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c+=b-d,a.setTime(c))}}}var c=function(c){function d(a){var b=a.dimensions.time;if(void 0!==b){var c=b.values.join(",");return fi.fmi.metoclient.ui.animator.WmsCapabilities.parseWmsTime(c)}throw"Missing time dimension for layer "+a.name}function e(){var a=l.getConfig();if(!j&&a&&a.map&&a.map.className){var b;if(a.map.args&&a.map.args.length>0){b=a.map.args;var c=b[0];c.theme||(c.theme=null)}j=o(a.map.className,b)}return j}function f(){return _.map(k.timelines,function(a){return new OpenLayers.Layer.Animation.ControlLayer(a[0].name,{layers:a})})}function g(){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.animation;if(d)return d}}return void 0}function d(a,b){return function(c){var d=[b[0]+Math.random()].concat(b.slice(1)),e=new(n(a,d));return e.setTime(c),e}}function e(c){void 0===c.resolutionTime&&(c.resolutionTime=l.getAnimationResolution()),c.isForecast?((void 0===c.beginTime||"join"===c.beginTime)&&(c.beginTime=l.getForecastBeginDate()),void 0===c.endTime&&(c.endTime=l.getAnimationEndDate())):(void 0===c.beginTime&&(c.beginTime=l.getAnimationBeginDate()),void 0===c.endTime&&(c.endTime=l.getForecastBeginDate())),c.resolutionTime&&(c.beginTime instanceof Date||(c.beginTime=new Date(c.beginTime)),a(c.beginTime,c.resolutionTime),c.endTime instanceof Date||(c.endTime=new Date(c.endTime)),b(c.endTime,c.resolutionTime))}function f(){}function g(a){var b={transparent:!0,format:"image/png"},c={singleTile:!1,displayInLayerSwitcher:!1,isBaseLayer:!1},d=_.extend(b,a[2]),e=_.extend(c,a[3]);a[2]=d,a[3]=e}function h(a){var b=OpenLayers.Layer.Animation.TimedLayerClassWrapper(OpenLayers.Layer.WMS,{timeSetter:OpenLayers.Layer.Animation.TimedLayerClassWrapper.mergeParams}),c=a.args[3].animation.layers;if(void 0!==c&&c.length>0){console.log("Found subLayers for layer",a.args[0]);var d=_.map(c,function(c){var d=c.name;void 0===d&&(d=a.args[0]+"_"+c.layer);var f=a.args[1],h={layers:c.layer},i={animation:_.pick(c,["beginTime","endTime","resolutionTime","hasLegend","isForecast"])};e(i.animation),console.log("Filled-out animation config for layer",d,i.animation);var k=[d,f,h,i],l=j(i.animation);return g(k),i.animation.isForecast&&!z?void 0:p(b,d,k,l,{layer:c.layer,url:a.capabilities.url})});return d[0]}}function i(){}function j(a){return a.hasLegend?new OpenLayers.Layer.Animation.WMSWMTSLegendInfoProvider:new OpenLayers.Layer.Animation.DisabledLegendInfoProvider}function p(a,b,c,e,f){var g=d(a,c),h=c[3].animation,i=new OpenLayers.Layer.Animation.PreloadingTimedLayer(b,{layerFactory:g,preloadPolicy:u,retainPolicy:r,fader:v,timeSelector:h.isForecast?s:t,legendInfoProvider:e,displayInLayerSwitcher:!1,capabilities:f});return i}function q(){if(w&&w.layers)for(var a=w.layers,b=0;b<a.length;++b){var d=a[b];if(d&&d.className&&d.args){var l=c(d.args);if(l){if(e(l),l.isForecast&&!z)continue;var n,q;if(0===d.className.indexOf("OpenLayers.Layer.Animation.Wms"))n=OpenLayers.Layer.Animation.TimedLayerClassWrapper(OpenLayers.Layer.WMS,{timeSetter:OpenLayers.Layer.Animation.TimedLayerClassWrapper.mergeParams}),g(d.args),q=h(d);else{if(0!==d.className.indexOf("OpenLayers.Layer.Animation.Wms"))throw"Unknown class: "+d.className;n=OpenLayers.Layer.Animation.TimedLayerClassWrapper(OpenLayers.Layer.WMTS,{timeSetter:OpenLayers.Layer.Animation.TimedLayerClassWrapper.mergeParams}),f(d.args),q=i(d)}var r=j(l),s=p(n,d.args[0],d.args,r,d.capabilities);m.push(s),k.timelines[s.name]=[s],l.isForecast?y.push(s.name):x.push(s.name),void 0!==q&&(m.push(q),k.timelines[s.name].push(q),y.push(q.name))}else m.push(o(d.className,d.args))}}}if(0!==m.length)return m;var r=new OpenLayers.Layer.Animation.RetainRange,s=new OpenLayers.Layer.Animation.ShowOnlyInrangeWrapper(new OpenLayers.Layer.Animation.ShowNextAvailable,l.getAnimationResolution()),t=new OpenLayers.Layer.Animation.ShowOnlyInrangeWrapper(new OpenLayers.Layer.Animation.ShowPreviousAvailable,l.getAnimationResolution()),u=new OpenLayers.Layer.Animation.PreloadAll,v=new OpenLayers.Layer.Animation.ImmediateFader,w=l.getConfig();k={globalRange:[l.getAnimationBeginDate(),l.getAnimationEndDate()],timelines:{},rangeGroups:{}};var x=[],y=[];k.rangeGroups.observation={range:[l.getAnimationBeginDate(),l.getForecastBeginDate()],layers:x},k.rangeGroups.forecast={range:[new Date(l.getForecastBeginDate().getTime()+1),l.getAnimationEndDate()],layers:y};var z=l.getForecastBeginDate().getTime()!==l.getAnimationEndDate().getTime();return q(),m}function h(){return 0===m.length&&g(),k}function i(a){var b={};return _.each(a,function(a){if(void 0!==a.getCapabilities){var c=a.getCapabilities();if(void 0!==c){var e=l.getCapabilityLayer(c.layer,c.url);void 0===e?(b[a.id]=timestep.restricted(l.getAnimationBeginDate(),l.getAnimationEndDate(),l.getAnimationResolution()),console.log("Pseudo availability for layer",a.name,":",b[a.id])):(b[a.id]=d(e),console.log("Actual capability information for layer",a.name,":",b[a.id]))}}}),b}var j,k,l=c,m=[],n=function(a,b){var c;if(a){var d=[a,a];b&&(d=d.concat(b)),c=_.bind.apply(_,d)}return c},o=function(a,b){var c;if(a){var d=a.split("."),e=window||this;if(e){for(var f=0,g=d.length;g>f;f++)e=e[d[f]];"function"==typeof e&&(c=new(n(e,b)))}}return c};this.getMap=e,this.getLayers=g,this.getControlLayers=f,this.getConstraints=h,this.getAvailableRanges=i};return c}(),"undefined"==typeof Raphael||!Raphael)throw"ERROR: Raphael JS is required for fi.fmi.metoclient.ui.animator.Controller!";if("undefined"==typeof jQuery||!jQuery)throw"ERROR: jQuery is required for fi.fmi.metoclient.ui.animator.Controller!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},fi.fmi.metoclient.ui.animator.Controller=function(){function a(a){var b=a.getHours(),c=a.getMinutes(),d=b>9?b:"0"+b;return d+=":",d+=c>9?c:"0"+c}var b=Raphael,c="Arial",d=12,e=function(e,f,g){function h(){return 50}function i(){return Math.floor(jQuery(ib.node).offset().left)}function j(){return i()+h()}function k(){pb.attr("stroke-width",0);var a=Math.floor(jQuery(pb.node).offset().left);return pb.attr("stroke-width",eb.strokeWidth),a}function l(){return k()+eb.sliderTipDx}function m(){var a=l()-i();0>a&&(a=0),mb.attr("width",a);var b=ib.attr("width")-a;0>b&&(b=0),nb.attr("x",mb.attr("x")+a).attr("width",b)}function n(){return bb?bb.getForecastStartTime():0}function o(){return bb?bb.getStartTime():0}function p(){return bb?bb.getEndTime():0}function q(){return bb?bb.getResolution():0}function r(){return ib.getBBox().x+h()}function s(){return ib.getBBox().y}function t(){return Math.floor(db.width-2*h())}function u(){return Math.floor(ib.getBBox().height)}function v(){var a=q();if(a){var b=o(),c=p(),d=Math.floor((c-b)/a);return t()/d}return 0}function w(){return bb&&t()?(bb.getEndTime()-bb.getStartTime())/t():1}function x(a){var b=q();return void 0!==a&&null!==a&&b&&(a+=Math.floor(b/4),a-=a%b),a}function y(a){var b=Math.floor(o()+(a-j())*w());return b<o()?b=o():b>p()&&(b=p()),b}function z(a){var b=j(),c=a-o(),d=w(),e=Math.floor(b+(d?c/d:0));return e}function A(){var b=new Date(x(y(l())));qb.attr("text",a(b))}function B(a){var b=/T-*\d+,0/;ob.forEach(function(c){var d=c.transform().toString(),e=d.match(b);if(e&&e.length){var f=parseInt(e[0].substring(1),10);c.transform(d.replace(b,"T"+(f+a)+",0"))}else c.transform("...T"+a+",0")})}function C(a){var b=Math.round(a-l()),c=j();b&&a>=c+Math.floor(v())&&a<=c+t()&&(B(b),A(),m())}function D(){ob.toFront(),A()}function E(){cb.proposePause(),rb=k()}function F(a){var b=y(rb+a);cb.proposeTimeSelectionChange(b)}function G(){rb=void 0}function H(){cb.proposeNextFrame()}function I(){cb.proposePreviousFrame()}function J(a,b){return b>0?H():0>b&&I(),!1}function K(){var a=0,b=n(),c=o(),d=p();return void 0!==b?bb&&d-c&&(a=Math.floor(t()*(b-c)/(d-c))):a=t(),0>a&&(a=0),a}function L(){var a=bb?t()-K():0;return 0>a&&(a=0),a}function M(){var a=K(),b=L(),c=a+b;jb.attr("x",db.x+h()).attr("width",c),kb.attr("x",db.x+h()).attr("width",a),lb.attr("x",db.x+h()+a).attr("width",b)}function N(){function a(a,b,c){var d=_.remove(a,function(a){return a.data("startDate")===b&&a.data("endDate")===c});return d[0]}var b=hb;hb=[];var c=q();if(c)for(var d=o(),e=p(),f=r(),g=s()+u()-db.progressCellHeight-1,h=Math.floor((e-d)/c),i=v(),j=0;h>j;++j){var k=d+j*c,l=d+(j+1)*c,m=ab.rect(f+j*i,g,i,db.progressCellHeight);m.node.id="animationProgressCell_"+(d+(j+1)*c),m.data("startDate",k),m.data("endDate",l),jQuery(m.node).mousewheel(J);var n=a(b,k,l);void 0===n?(console.log("Initializing anew"),m.data("nStarted",0),m.data("nComplete",0),m.data("nErrors",0),m.attr("fill",db.bgColor).attr("stroke-width","0")):(console.log("Initializing from old cell"),m.data("nStarted",n.data("nStarted")),m.data("nComplete",n.data("nComplete")),m.data("nErrors",n.data("nErrors")),m.attr("fill",n.attr("fill")).attr("stroke-width","0")),hb.push(m)}}function O(a){for(var b=0;b<hb.length;++b){var c=hb[b],d=c.data("startDate"),e=c.data("endDate");if(a>d&&e>=a)return c}return void 0}function P(){for(;gb.length;)gb.splice(0,1)[0].remove();var b=q();if(b)for(var e,f=o(),g=p(),h=r(),i=Math.floor((g-f)/b),k=t()/i,l=0;i>=l;++l){var m=h+l*k,n=new Date(f+l*b),v=u()-(db.height-db.bgHeight),w=0===n.getMinutes()&&0===n.getSeconds()&&0===n.getMilliseconds();if((w||0===l||l===i)&&(v=u()/4),v){var x=s()+u(),y=ab.path("M"+m+","+x+"V"+v);if(y.attr("stroke",Raphael.getRGB("white")).attr("opacity",.5),gb.push(y),jQuery(y.node).mousewheel(J),w&&i>l){var z=ab.text(m+2,s()+8,a(n)).attr("text-anchor","start").attr("font-family",c).attr("font-size",d).attr("fill",Raphael.getRGB("black")),A=jQuery(z.node);A.offset().left+A.width()<=j()+t()?(gb.push(z),jQuery(z.node).mousewheel(J)):z.remove()}}e=n.getHours()}}function Q(){M(),N(),P(),D(),m(),mb.toFront(),nb.toFront()}function R(){for(var a=0,b=0;b<hb.length;++b){var c=hb[b],d=c.data("nStarted"),e=c.data("nComplete");d>e&&(a+=1)}return a}function S(){return _.map(hb,function(a){var b,c=a.data("nStarted"),d=a.data("nComplete");return b=0===c?"empty":d>=c?"complete":"loading",{time:new Date(a.data("endDate")),state:b}})}function T(){void 0===fb&&(fb=setTimeout(function(){cb.proposePause(),fb=void 0},3*bb.getFrameRate()/4))}function U(){void 0!==fb&&(clearTimeout(fb),fb=void 0)}function V(a){for(var b=a.events,c=0;c<b.length;++c){var d=b[c].time.getTime(),e=O(d);if(e){var f=e.data("nErrors");b[c].error&&(f+=1,e.data("nErrors",f));var g=e.data("nStarted");g+=1,e.data("nStarted",g);var h=e.data("nComplete");g>h&&(e.attr("fill",f>0?db.cellErrorColor:db.cellLoadingColor),T())}}}function W(a){for(var b=a.events,c=0;c<b.length;++c){var d=b[c].time.getTime(),e=O(d);if(e){var f=e.data("nErrors");b[c].error&&(f+=1,e.data("nErrors",f));var g=e.data("nComplete");g+=1,e.data("nComplete",g);var h=e.data("nStarted");g>=h&&(e.attr("fill",f>0?db.cellErrorColor:db.cellReadyColor),0===R()&&(U(),cb.proposePreload(S())),g>h&&console.error("BUG? complete: ",g,"started: ",h))}}}function X(a){for(var b=a.events,c=0;c<b.length;++c){var d=b[c].time.getTime();C(z(d))}}function Y(a){bb=a,a.addTimePeriodChangeListener({timePeriodChanged:function(){Q(),cb.proposePreload(S())}}),a.addTimeSelectionChangeListener({selectedTimeChanged:function(a){C(z(a))}}),a.addForecastStartTimeChangeListener({forecastStartTimeChanged:function(){M()}}),a.addAnimationEventsListener({loadFrameStartedCb:V,loadFrameCompleteCb:W,frameChangedCb:X}),Q()}function Z(a){cb=a}function $(){ab.remove()}var ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb=this;!function(){ab=b(e,f,g),db={radius:5,x:0,y:0,width:f,height:g-35,bgColor:Raphael.rgb(88,88,88),cellReadyColor:Raphael.rgb(148,191,119),cellErrorColor:Raphael.rgb(154,37,0),cellLoadingColor:Raphael.rgb(148,191,191),obsBgColor:Raphael.rgb(178,216,234),fctBgColor:Raphael.rgb(231,166,78)},db.bgHeight=Math.floor(2*db.height/3),db.progressCellHeight=db.height-db.bgHeight-2,eb={height:30,width:65,bgColor:Raphael.rgb(88,88,88),strokeBgColor:Raphael.rgb(191,191,191),strokeWidth:1},eb.sliderTipHeight=eb.height*(3/7),eb.scaleX=eb.width/14,eb.scaleY=(eb.height+eb.sliderTipHeight)/7,eb.sliderTipDx=Math.floor(4*eb.scaleX),eb.y=db.y+db.height-Math.floor(eb.sliderTipHeight/3),gb=ab.set(),hb=[],ib=ab.rect(db.x,db.y,db.width,db.height,db.radius),ib.attr("stroke-width",0),ib.attr("opacity",0),jb=ab.rect(db.x+h(),db.y,K()+L(),db.height),jb.attr("fill",db.bgColor),jb.attr("stroke-width",0),kb=ab.rect(db.x+h(),db.y,K(),db.bgHeight),kb.attr("fill",db.obsBgColor),kb.attr("stroke-width",0),lb=ab.rect(db.x+h()+K(),db.y,L(),db.bgHeight),lb.attr("fill",db.fctBgColor),lb.attr("stroke-width",0),mb=ab.rect(db.x,db.y,h(),db.height),mb.attr("fill",Raphael.rgb(0,0,0)).attr("opacity",0),mb.attr("stroke-width",0),mb.click(I),nb=ab.rect(db.x+f,db.y,h(),db.height),nb.attr("fill",Raphael.rgb(0,0,0)).attr("opacity",0),nb.attr("stroke-width",0),nb.click(H),jQuery([ib.node,jb.node,kb.node,lb.node,mb.node,nb.node]).mousewheel(J),ob=ab.set(),pb=ab.path("M0,2L0,7L14,7L14,2L6,2L4,0L2,2Z"),pb.attr("fill",eb.bgColor),pb.attr("stroke",eb.strokeBgColor),pb.attr("stroke-width",eb.strokeWidth),pb.transform("S"+eb.scaleX+","+eb.scaleY+",0,0T0,"+eb.y),qb=ab.text(32,eb.y+26,"00:00"),qb.attr("text-anchor","start").attr("font-family",c).attr("font-size",d),qb.attr("fill",eb.strokeBgColor).attr("stroke-width",0),ob.push(pb),ob.push(qb),ob.drag(F,E,G,sb,sb,sb),A(),jQuery([pb.node,qb.node]).mousewheel(J),C(j())}(),this.setTimeModel=Y,this.setTimeController=Z,this.remove=$};return e}(),"undefined"==typeof _||!_)throw"ERROR: Lodash is required for fi.fmi.metoclient.ui.animator.Animator!";if("undefined"==typeof jQuery||!jQuery)throw"ERROR: jQuery is required for fi.fmi.metoclient.ui.animator.Animator!";if("undefined"==typeof OpenLayers||!OpenLayers)throw"ERROR: OpenLayers is required for fi.fmi.metoclient.ui.animator.Animator!";if("undefined"==typeof OpenLayers.Layer||"undefined"==typeof OpenLayers.Layer.Animation||"undefined"==typeof OpenLayers.Layer.Animation.Utils||!OpenLayers.Layer.Animation.Utils)throw"ERROR: OpenLayers.Layer.Animation.Utils is required for fi.fmi.metoclient.ui.animator.Animator!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},"undefined"==typeof fi.fmi.metoclient.ui.animator.Factory2||!fi.fmi.metoclient.ui.animator.Factory2)throw"ERROR: fi.fmi.metoclient.ui.animator.Factory2 is required for fi.fmi.metoclient.ui.animator.Animator!";if("undefined"==typeof fi.fmi.metoclient.ui.animator.Controller||!fi.fmi.metoclient.ui.animator.Controller)throw"ERROR: fi.fmi.metoclient.ui.animator.Controller is required for fi.fmi.metoclient.ui.animator.Animator!";if(fi.fmi.metoclient.ui.animator.Animator=function(){function a(a){var b;return _.isObject(a)&&_.isFunction(a.clone)&&(b=a.clone()),b}var b=function(){function b(){var b=new fi.fmi.metoclient.ui.animator.ConfigLoader(_.cloneDeep(M.config||fi.fmi.metoclient.ui.animator.Config,a));console.log("Updated capabilities"),fi.fmi.metoclient.ui.animator.WmsCapabilities.getDataMultiple(b.getCapabilitiesUrls(),function(a,c){if(console.log("Got capabilities update"),c.length)console.error("Got async errors during config update");else{b.init(a),N=b;var d=new fi.fmi.metoclient.ui.animator.Factory2(N),f=d.getConstraints(),i=d.getAvailableRanges(O.getLayers());P.update(f,i),U.proposeTimePeriodChange(e(),g(),h()),_.each(d.getLayers(),function(a){a.destroy()})}})}function c(a,c){if(c&&c.length)"undefined"!=typeof console&&console&&console.error("ERROR: Animator config init errors. Animation is not created!");else{console.log("Got data"),N.init(a),jQuery(".animatorLoadProgressbar").hide(),O=new fi.fmi.metoclient.ui.animator.Factory2(N);var d=O.getLayers(),e=(O.getControlLayers(),_.filter(d,function(a){return a.setTime&&a.setRange})),f=O.getConstraints(),g=O.getAvailableRanges(d);P=new OpenLayers.Layer.Animation.LayerGroupCoordinator(e,f,g),B(),E()}ab(M.callback,c),N.getCapabilitiesUrls().length&&N.getConfig().updateCapabilities&&(console.log("Scheduling GetCapabilities updates"),setInterval(function(){b()},6e4))}function d(a){var b;return _.isFunction(a)&&(b=_.debounce(a,10,{maxWait:100})),b}function e(){return N.getAnimationBeginDate()}function f(){var a=N.getConfig().initialDate;return void 0===a||"begin"===a?new Date(e().getTime()+h()):"end"===a?g():"forecast"===a?j():void 0}function g(){return N.getAnimationEndDate()}function h(){return N.getAnimationResolution()}function i(){return N.getAnimationFrameRate()}function j(){return N.getForecastBeginDate()}function k(){if(M){var a=jQuery("#"+M.playAndPauseDivId);a.length&&a.click(function(){void 0!==Q?r():q()}),l()}}function l(){if(M){var a=jQuery("#"+M.playAndPauseDivId);if(a.length){var b=a.css("background-image");void 0!==Q?(b=b.replace("play.png","pause.png"),a.css("background-image",b)):(b=b.replace("pause.png","play.png"),a.css("background-image",b))}}}function m(){if(void 0===R)R=e().getTime();else{var a=h();R=R+a>g().getTime()?e().getTime():R+a}P.setTime(new Date(R))}function n(){if(void 0===R)R=e().getTime();else{var a=h();R=R-a<e().getTime()?g().getTime():R-a}P.setTime(new Date(R))}function o(a,b,c,d){jQuery.each(d,function(d,e){e.timePeriodChanged(a,b,c)})}function p(a,b){var c=a instanceof Date?a.getTime():a;c!==R&&(R=c,P.setTime(new Date(R)),jQuery.each(b,function(b,c){c.selectedTimeChanged(a)}))}function q(){void 0===Q&&(Q=new Date,l(),s())}function r(){void 0!==Q&&(Q=void 0,l())}function s(){if(void 0!==Q&&N){requestAnimationFrame(s);var a=new Date;Q.getTime()+N.getAnimationFrameRate()<a.getTime()&&(Q=a,m())}}function t(){r(),m()}function u(){r(),n()}function v(a,b,c,d){var e=jQuery('<div class="scroll-content-item ui-widget-header"></div>');e.css("background-image","url('"+c.url+"')"),d&&(e.addClass("selectedLegend"),b.css("background-image",e.css("background-image")));var f=a.width()||2;a.append(e);var g=f+e.outerWidth(!0);a.width()<g&&a.width(g),e.click(function(){e.hasClass("selectedLegend")||(jQuery(".scroll-content-item").removeClass("selectedLegend"),e.addClass("selectedLegend"),b.css("background-image",e.css("background-image")))})}function w(){var a=jQuery(".scroll-pane"),b=jQuery(".scroll-content");b.width()<a.outerWidth(!0)&&b.width(a.outerWidth(!0));var c=jQuery(".scroll-bar").slider({slide:function(c,d){b.width()>a.width()?b.css("margin-left",Math.round(d.value/100*(a.width()-b.width()))+"px"):b.css("margin-left",0)}}),e=c.find(".ui-slider-handle").mousedown(function(){c.width(e.width())}).mouseup(function(){c.width("100%")}).append("<span class='ui-icon ui-icon-grip-dotted-vertical'></span>").wrap("<div class='ui-handle-helper-parent'></div>").parent();a.css("overflow","hidden");var f=function(){var d=a.width()-b.width();d>0&&(d=0);var e="auto"===b.css("margin-left")?0:parseInt(b.css("margin-left"),10),f=d?Math.round(e/d*100):0;c.slider("value",f)},g=function(){if(b.width()>a.width()){var c=b.width()+parseInt(b.css("margin-left"),10),d=a.width()-c;d>0&&b.css("margin-left",parseInt(b.css("margin-left"),10)+d+"px")}else b.css("margin-left",0)},h=function(){var d=b.width()-a.width();0>d&&(d=0);var f=d/b.width(),g=a.width()-f*a.width();c.find(".ui-slider-handle").css({width:Math.floor(g),"margin-left":-Math.floor(g/2)}),e.width(Math.floor(c.width()-g))};S=d(function(){f(),g(),h()});var i=setTimeout(function(){h(),Z.splice(Z.indexOf(i),1),i=void 0},10);Z.push(i)}function x(){w()}function y(a,b){if(a){var c,d,e,f,g,h,i=jQuery("#"+a);i.empty();var j=0;for(c=0;c<b.length;++c)if(e=b[c],e.getVisibility()&&e.getLegendInfo)for(f=e.getLegendInfo(),d=0;d<f.length;++d)g=f[d],g.hasLegend&&++j;if(j)if(1===j){for(i.removeClass("animatorLegendNoLegend"),M.animationDivId&&jQuery("#"+M.animationDivId).removeClass("animatorAnimationNoLegend"),h=jQuery('<div class="animatorLegendView animatorLegendViewOne"></div>'),i.append(h),c=0;c<b.length;++c)if(e=b[c],e.getVisibility()&&e.getLegendInfo)for(f=e.getLegendInfo(),d=0;d<f.length;++d)if(g=f[d],g.hasLegend){h.css("background-image","url('"+g.url+"')");break}}else{i.removeClass("animatorLegendNoLegend"),M.animationDivId&&jQuery("#"+M.animationDivId).removeClass("animatorAnimationNoLegend");var k=jQuery('<div class="animatorLegendThumbnails"></div>');k.append('<div class="scroll-pane ui-widget ui-widget-header ui-corner-all"><div class="scroll-content"></div><div class="scroll-bar-wrap ui-widget-content ui-corner-bottom"><div class="scroll-bar"></div></div></div>'),i.append(k),h=jQuery('<div class="animatorLegendView"></div>'),i.append(h);var l=jQuery(".scroll-content"),m=!1;for(c=0;c<b.length;++c)if(e=b[c],e.getVisibility()&&e.getLegendInfo)for(f=e.getLegendInfo(),d=0;d<f.length;++d)g=f[d],g.hasLegend&&(v(l,h,g,!m),m=!0);x()}else i.addClass("animatorLegendNoLegend"),M.animationDivId&&jQuery("#"+M.animationDivId).addClass("animatorAnimationNoLegend")}else M.animationDivId&&jQuery("#"+M.animationDivId).addClass("animatorAnimationNoLegend")}function z(a){if(M.legendDivId)for(var b=function(){y(M.legendDivId,a)},c={visibilitychanged:b,added:b,removed:b},d=0;d<a.length;++d){var e=a[d];e.events&&e.getLegendInfo&&e.events.on(c)}}function A(a,b,c){if(a){var d;b&&(d={div:OpenLayers.Util.getElement(b)});var e=new OpenLayers.Control.LayerSwitcher(d);a.addControl(e),c||e.minimizeControl()}}function B(){if(M.mapDivId){var a=O.getMap();if(a){a.render(M.mapDivId);var b=O.getLayers(),c=O.getControlLayers();if(_.each(c,function(b){a.addLayer(b)}),b){z(b);for(var d=0;d<b.length;++d){var e=b[d];e.events&&e.events.on($),a.addLayer(e)}}a.setCenter(a.getCenter(),N.getDefaultZoomLevel()),A(a,M.layerSwitcherDivId,M.maximizeSwitcher)}}}function C(){T&&(T.remove(),T=void 0,V=void 0)}function D(a,b,c){var d=new fi.fmi.metoclient.ui.animator.Controller(a[0],a.width(),a.height());return d.setTimeModel(b),d.setTimeController(c),d}function E(){if(!M||!M.controllerDivId||!M.playAndPauseDivId)throw"ERROR: Options or properties missing for controller!";if(void 0!==e()&&void 0!==g()){var a="#"+M.controllerDivId,b=jQuery(a);if(b.length){var c=[],l=[],m=[],n=[],q={getStartTime:function(){return e().getTime()},getEndTime:function(){return g().getTime()},getResolution:function(){return h()},getFrameRate:function(){return i()},getForecastStartTime:function(){return j().getTime()},addTimePeriodChangeListener:function(a){c.push(a)},addTimeSelectionChangeListener:function(a){l.push(a)},addAnimationEventsListener:function(a){X.push(a)},addForecastStartTimeChangeListener:function(a){m.push(a)},addTickIntervalChangeListener:function(a){n.push(a)}};U={proposeTimePeriodChange:function(a,b,d){o(a,b,d,c)},proposeTimeSelectionChange:function(a){a>=e().getTime()&&a<=g().getTime()&&(a-=a%h(),p(a,l))},proposeNextFrame:function(){t()},proposePreviousFrame:function(){u()},proposePause:function(){r()},proposePreload:function(a){var b=_.any(a,function(a){return"loading"===a.state});if(!b){var c=_.find(a,function(a){return"empty"===a.state});void 0!==c&&P.preload(c.time)}}},T=D(b,q,U);var s=b.width();V=d(function(){var c=jQuery(a).width();c!==s&&(s=c,T.remove(),T=D(b,q,U))}),k(),U.proposeTimeSelectionChange(f().getTime())}}}function F(){M&&(M.animatorContainerDivId?jQuery("#"+M.animatorContainerDivId+" > .animator").remove():(M.animationDivId&&jQuery("#"+M.animationDivId).remove(),M.mapDivId&&jQuery("#"+M.mapDivId).remove(),M.layerSwitcherDivId&&jQuery("#"+M.layerSwitcherDivId).remove(),M.controllerDivId&&jQuery("#"+M.controllerDivId).remove(),M.playAndPauseDivId&&jQuery("#"+M.playAndPauseDivId).remove(),M.logoDivId&&jQuery("#"+M.logoDivId).remove(),M.legendDivId&&jQuery("#"+M.legendDivId).remove()))}function G(a){if(a){if(a.animatorContainerDivId){var b=jQuery('<div class="animator"><div class="animatorAnimation" id="animatorAnimationId"><div class="animatorMap" id="animatorMapId"><div class="animatorLogo" id="animatorLogoId"></div><div class="animatorPlayAndPause" id="animatorPlayAndPauseId"></div></div><div class="animatorController" id="animatorControllerId"></div><div class="animatorLayerSwitcher" id="animatorLayerSwitcherId"></div></div><div class="animatorLegend" id="animatorLegendId"></div></div>');jQuery("#"+a.animatorContainerDivId).append(b),a.animationDivId="animatorAnimationId",a.mapDivId="animatorMapId",a.layerSwitcherDivId="animatorLayerSwitcherId",a.controllerDivId="animatorControllerId",a.playAndPauseDivId="animatorPlayAndPauseId",a.logoDivId="animatorLogoId",a.legendDivId="animatorLegendId"}if(a.animationDivId){var c=jQuery('<div class="animatorLoadProgressbar"></div>');jQuery("#"+a.animationDivId).append(c),c.progressbar({value:!1}),c.hide()}}}function H(){if(M&&!M.callback){var a="ERROR: Animator init options.callback is mandatory if getConfig is used!";throw"undefined"!=typeof console&&console&&console.error(a),a}return N}function I(){if(M&&!M.callback){var a="ERROR: Animator init options.callback is mandatory if getConfig is used!";throw"undefined"!=typeof console&&console&&console.error(a),a}return O}function J(){if(jQuery(window).resize(),N){var a=O.getMap();a&&a.updateSize()}}function K(){if(N){var a=O.getMap();a&&a.destroy()}for(;Z.length;)clearTimeout(Z.pop());X=[],Y=[],Q=void 0,R=void 0,S=void 0,F(),C(),N=void 0,O=void 0,M=void 0}function L(b){if(!M&&b)try{M=b,G(b),N=new fi.fmi.metoclient.ui.animator.ConfigLoader(_.cloneDeep(b.config||fi.fmi.metoclient.ui.animator.Config,a)),jQuery(".animatorLoadProgressbar").show(),console.log("Fetching data"),fi.fmi.metoclient.ui.animator.WmsCapabilities.getDataMultiple(N.getCapabilitiesUrls(),c)}catch(d){var e=d.toString();
"undefined"!=typeof console&&console&&console.error("ERROR: Animator init error: "+e),jQuery(".animatorLoadProgressbar").hide(),ab(b.callback,[e])}}var M,N,O,P,Q,R,S,T,U,V,W=this,X=[],Y=[],Z=[],$={scope:W,frameloadstarted:void 0,frameloadcomplete:void 0,framechanged:void 0};$.frameloadstarted=function(a){jQuery.each(X,function(b,c){c.loadFrameStartedCb(a)})},$.frameloadcomplete=function(a){jQuery.each(X,function(b,c){c.loadFrameCompleteCb(a)})},$.framechanged=function(a){jQuery.each(X,function(b,c){c.frameChangedCb(a)})},jQuery(window).resize(function(){S&&S(),V&&V()});var ab=function(a,b){a&&setTimeout(function(){a(W,b)},0)};this.init=L,this.reset=K,this.refresh=J,this.getConfig=H,this.getFactory=I};return b}(),"undefined"==typeof _||!_)throw"ERROR: Lodash is required for fi.fmi.metoclient.ui.animator.Animator!";var fi=fi||{};if(fi.fmi=fi.fmi||{},fi.fmi.metoclient=fi.fmi.metoclient||{},fi.fmi.metoclient.ui=fi.fmi.metoclient.ui||{},fi.fmi.metoclient.ui.animator=fi.fmi.metoclient.ui.animator||{},"undefined"==typeof fi.fmi.metoclient.ui.animator.WmsCapabilities||!fi.fmi.metoclient.ui.animator.WmsCapabilities)throw"ERROR: fi.fmi.metoclient.ui.animator.WmsCapabilities is required for fi.fmi.metoclient.ui.animator.ConfigLoader!";fi.fmi.metoclient.ui.animator.ConfigLoader=function(){function a(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c-=d,a.setTime(c))}}}function b(a,b){if(a&&b&&b>0){var c=a.getTime();if(c!==b){var d=c%b;d&&(c+=b-d,a.setTime(c))}}}var c="auto",d="join",e=function(e){function f(a,b){var c;if(a&&b)for(var d=0;d<A.length;++d){var e=A[d];if(e){var f=e.capabilities;if(f&&b===e.url){var g=fi.fmi.metoclient.ui.animator.WmsCapabilities.getLayer(f,a);if(g){c=g;break}}}}return c}function g(){if(z.animationDeltaToEndTime<=0)return void(B=s());if(z&&z.layers&&z.layers.length){b(B,q());for(var c=0;c<z.layers.length;++c){var d=z.layers[c];if(d)for(var e=0;e<d.args.length;++e){var f=d.args[e];if(f){var g,h=f.animation;if(h){var i=h.resolutionTime;if(void 0===i&&(i=q(),void 0===i))throw"ERROR: Animation resolution time missing!";if(h.isForecast&&(g=void 0!==h.beginTime?new Date(h.beginTime instanceof Date?h.beginTime.getTime():h.beginTime):r(),a(g,i),void 0!==g&&(void 0===B||B.getTime()>g.getTime())&&(B=g)),h.layers)for(var j=0;j<h.layers.length;++j){var k=h.layers[j];k&&(k.isForecast||h.isForecast)&&(g=void 0!==k.beginTime?new Date(k.beginTime instanceof Date?k.beginTime.getTime():k.beginTime):r(),a(g,i),void 0!==g&&(void 0===B||B.getTime()>g.getTime())&&(B=g))}break}}}}}}function h(d,e,f){d&&e&&(d.beginTime===c&&(d.beginTime=fi.fmi.metoclient.ui.animator.WmsCapabilities.getBeginTime(e),b(d.beginTime,f)),d.endTime===c&&(d.endTime=fi.fmi.metoclient.ui.animator.WmsCapabilities.getEndTime(e),a(d.endTime,f)))}function i(a,c){if(a&&c&&c.url&&c.layer){var e=f(c.layer,c.url);if(!e)throw"ERROR: No capability information for layer "+c.layer+' but sub-layer uses beginTime "join"';var g=a.resolutionTime;if(void 0===g&&(g=q(),void 0===g))throw"ERROR: Animation resolution time missing!";if(h(a,e,g),a.layers)for(var i=0;i<a.layers.length;++i){var j=a.layers[i];if(j&&j.layer&&(h(j,f(j.layer,c.url),g),j.beginTime===d)){if(j.beginTime=fi.fmi.metoclient.ui.animator.WmsCapabilities.getEndTime(e),void 0===j.beginTime)throw"ERROR: Animation sub-layer missing capability begin time!";j.beginTime=new Date(j.beginTime.getTime()+1),b(j.beginTime,g)}}}}function j(){if(A.length&&z&&z.layers)for(var a=0;a<z.layers.length;++a){var b=z.layers[a];if(b&&b.args)for(var c=0;c<b.args.length;++c){var d=b.args[c];if(d){var e=d.animation;if(e){i(e,b.capabilities);break}}}}g()}function k(){var a;if(z){var b=z.layers;if(b)for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.args)for(var e=0;e<d.args.length;++e){var f=d.args[e];if(f){var g=f.animation;if(g){(!a||void 0!==g.resolutionTime&&null!==g.resolutionTime&&a<g.resolutionTime)&&(a=g.resolutionTime);break}}}}}return a}function l(){var a;if(z){var b=z.layers;if(b)for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.args)for(var e=0;e<d.args.length;++e){var f=d.args[e];if(f){var g=f.animation;if(g){if(void 0!==g.beginTime&&null!==g.beginTime){var h=g.beginTime;h instanceof Date||(h=new Date(h)),(void 0===a||h.getTime()<a.getTime())&&(a=new Date(h.getTime()))}break}}}}}return a}function m(){var a;if(z){var b=z.layers;if(b)for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.args)for(var e=0;e<d.args.length;++e){var f=d.args[e];if(f){var g=f.animation;if(g){if(void 0!==g.endTime&&null!==g.endTime){var h=g.endTime;h instanceof Date||(h=new Date(h)),(void 0===a||h.getTime()>a.getTime())&&(a=new Date(h.getTime()))}break}}}}}return a}function n(){return z}function o(){return z?z.defaultZoomLevel:void 0}function p(){return z?z.animationFrameRate:void 0}function q(){if(void 0===w&&(w=z?z.animationResolutionTime:void 0,!w&&(w=k(),!w)))throw"ERROR: Animation configuration missing resolution time!";return w}function r(){if(void 0===x&&z&&(void 0!==z.animationDeltaToBeginTime?(x=new Date,z.animationDeltaToBeginTime?(x.setTime(x.getTime()-z.animationDeltaToBeginTime),a(x,q())):b(x,q())):(x=l(),void 0!==x&&a(x,q())),void 0===x))throw"ERROR: Animation configuration missing proper begin time!";return void 0===x?void 0:new Date(x.getTime())}function s(){if(void 0===y&&z&&(void 0!==z.animationDeltaToEndTime?(y=new Date,y.setTime(y.getTime()+z.animationDeltaToEndTime),z.animationDeltaToEndTime>0?b(y,q()):a(y,q())):(y=m(),void 0!==y&&b(y,q())),void 0===y))throw"ERROR: Animation configuration missing proper end time!";return void 0===y?void 0:new Date(y.getTime())}function t(){return B}function u(){var a=_.filter(_.map(z.layers,"capabilities"));return _.uniq(_.map(a,"url"))}function v(a){A=a,j()}var w,x,y,z=e,A=[],B=new Date;this.init=v,this.getConfig=n,this.getCapabilitiesUrls=u,this.getCapabilityLayer=f,this.getDefaultZoomLevel=o,this.getAnimationFrameRate=p,this.getAnimationResolution=q,this.getAnimationBeginDate=r,this.getAnimationEndDate=s,this.getForecastBeginDate=t};return e}(),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{},f=-1===window.location.search.indexOf("debug=true");d--;)a=c[d],f?e[a]=b:e[a]||(e[a]=b)}();